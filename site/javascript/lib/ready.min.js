function addEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false);EventCache.add(b,c,a)}else if(b.attachEvent){b["e"+c+a]=a;b[c+a]=function(){b["e"+c+a](window.event)};b.attachEvent("on"+c,b[c+a]);EventCache.add(b,c,a)}else b["on"+c]=b["e"+c+a]}
var EventCache=function(){var b=[];return{listEvents:b,add:function(){b.push(arguments)},flush:function(){var c,a;for(c=b.length-1;c>=0;c-=1){a=b[c];a[0].removeEventListener&&a[0].removeEventListener(a[1],a[2],a[3]);if(a[1].substring(0,2)!="on")a[1]="on"+a[1];a[0].detachEvent&&a[0].detachEvent(a[1],a[2]);a[0][a[1]]=null}}}}();addEvent(window,"unload",EventCache.flush);
